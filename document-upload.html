<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter un document - Certicam</title>
    <link rel="stylesheet" href="css/tokens.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/document-upload.css">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/2.0.0/uicons-regular-rounded/css/uicons-regular-rounded.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <main class="upload-main">
        <div class="upload-container">
            <!-- Section d'upload -->
            <div class="upload-section">
                <h1 class="upload-title">Ajouter un document</h1>
                <p class="upload-subtitle">Formats pris en charge : PDF</p>

                <!-- Drop zone -->
                <div class="drop-zone" id="drop-zone">
                    <div class="drop-zone-content">
                        <i class="fi fi-rr-cloud-upload drop-icon"></i>
                        <p class="drop-text">Cliquez ou glissez-déposez le fichier ici</p>
                    </div>
                    <input type="file" id="file-input" accept=".pdf" style="display: none;" />
                </div>

                <!-- File preview section -->
                <div class="file-preview" id="file-preview" style="display: none;">
                    <div class="file-info">
                        <i class="fi fi-rr-file-pdf file-icon"></i>
                        <div class="file-details">
                            <div class="file-name" id="file-name">Relevé bancaire Coco Cobango.pdf</div>
                            <div class="file-size" id="file-size">1.2MB</div>
                        </div>
                        <button class="remove-file" id="remove-file">
                            <i class="fi fi-rr-cross-small"></i>
                        </button>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 100%;"></div>
                    </div>
                </div>

                <!-- Category selection -->
                <div class="category-section" id="category-section" style="display: none;">
                    <button class="category-btn" id="category-btn">
                        <span id="category-text">Choisissez la catégorie du document</span>
                        <i class="fi fi-rr-angle-down"></i>
                    </button>
                    <div class="category-menu" id="category-menu">
                        <div class="category-item" data-value="releve-bancaire">
                            <i class="fi fi-rr-bank"></i>
                            Relevé bancaire
                        </div>
                        <div class="category-item" data-value="justificatif-domicile">
                            <i class="fi fi-rr-home"></i>
                            Justificatif de domicile
                        </div>
                        <div class="category-item" data-value="piece-identite">
                            <i class="fi fi-rr-user"></i>
                            Pièce d'identité
                        </div>
                        <div class="category-item" data-value="bulletin-salaire">
                            <i class="fi fi-rr-receipt"></i>
                            Bulletin de salaire
                        </div>
                        <div class="category-item" data-value="contrat-travail">
                            <i class="fi fi-rr-document"></i>
                            Contrat de travail
                        </div>
                    </div>
                </div>

                <!-- Selected category tag -->
                <div class="category-tag" id="category-tag" style="display: none;">
                    <span id="tag-text">Relevé bancaire</span>
                    <button class="tag-close" id="tag-close">
                        <i class="fi fi-rr-cross-small"></i>
                    </button>
                </div>

                <!-- Bottom section with category and actions -->
                <div class="bottom-section">
                    <!-- Category selection area -->
                    <div class="category-area">
                        <!-- Category section will be moved here by JavaScript -->
                    </div>
                    
                    <!-- Action buttons -->
                    <div class="button-container">
                        <button type="button" class="btn btn-cancel" id="cancel-btn">
                            <i class="fi fi-rr-cross-small"></i>
                            Annuler
                        </button>
                        <button type="button" class="btn btn-submit" id="submit-btn" disabled>
                            <i class="fi fi-rr-plus"></i>
                            Ajouter
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Modal -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="modal-content">
                <div class="success-icon">
                    <i class="fi fi-rr-check"></i>
                </div>
                <h3 id="modal-title">Relevé bancaire Coco Cobango.pdf</h3>
                <p id="modal-subtitle">a été ajouté au portefeuille de Coco Cobango !</p>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="add-another">
                        <i class="fi fi-rr-plus"></i>
                        Ajouter un nouveau fichier
                    </button>
                    <button class="btn btn-primary" id="understood">
                        <i class="fi fi-rr-check"></i>
                        Compris !
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cancel Confirmation Modal -->
    <div class="modal-overlay" id="cancel-modal-overlay">
        <div class="modal cancel-modal">
            <div class="modal-content">
                <div class="warning-icon">
                    <i class="fi fi-rr-exclamation"></i>
                </div>
                <h3 class="cancel-modal-title">Annuler l'ajout de document ?</h3>
                <p class="cancel-modal-subtitle">Les données saisies seront perdues définitivement.</p>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancel-stay">
                        <i class="fi fi-rr-arrow-left"></i>
                        Continuer l'ajout
                    </button>
                    <button class="btn btn-danger" id="cancel-confirm">
                        <i class="fi fi-rr-cross"></i>
                        Annuler définitivement
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Marquer la page document-upload comme active quand la navbar est chargée
        document.addEventListener('navbarLoaded', () => {
            if (window.Certicam) {
                window.Certicam.setActivePage('document-upload.html');
            }
        });
    </script>
    <script src="js/document-upload.js"></script>
</body>
</html>