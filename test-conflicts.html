<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Conflits JavaScript</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div style="padding: 20px;">
        <h1>Test des conflits JavaScript</h1>
        
        <div style="margin: 20px 0;">
            <button id="filter-toggle" class="btn-primary">Ouvrir Filtres</button>
            <div id="filter-panel" style="display: none; background: #f0f0f0; padding: 20px; margin: 10px 0;">
                <p>Panneau de filtres</p>
                <button id="apply-filters" class="btn-secondary">Appliquer</button>
                <button id="reset-filters" class="btn-secondary">R√©initialiser</button>
            </div>
        </div>
        
        <div style="margin: 20px 0;">
            <h2>Tableau Test</h2>
            <table style="border-collapse: collapse; width: 100%;">
                <thead>
                    <tr>
                        <th style="border: 1px solid #ddd; padding: 10px;">Document</th>
                        <th style="border: 1px solid #ddd; padding: 10px;">Type</th>
                        <th style="border: 1px solid #ddd; padding: 10px;">Statut</th>
                        <th style="border: 1px solid #ddd; padding: 10px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 10px;">
                            <div class="document-info">
                                <span class="document-name">Test Document 1</span>
                                <span class="document-date">Mis en ligne le 20 Sep 2025</span>
                            </div>
                        </td>
                        <td style="border: 1px solid #ddd; padding: 10px;">Test</td>
                        <td style="border: 1px solid #ddd; padding: 10px;">
                            <span class="status valid">Valid√©</span>
                        </td>
                        <td style="border: 1px solid #ddd; padding: 10px;">
                            <button class="action-button view">
                                <i class="fi fi-rr-eye"></i> Aper√ßu
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 10px;">
                            <div class="document-info">
                                <span class="document-name">Test Document 2</span>
                                <span class="document-date">Mis en ligne le 19 Sep 2025</span>
                            </div>
                        </td>
                        <td style="border: 1px solid #ddd; padding: 10px;">Test</td>
                        <td style="border: 1px solid #ddd; padding: 10px;">
                            <span class="status not-valid">Pas valid√©</span>
                        </td>
                        <td style="border: 1px solid #ddd; padding: 10px;">
                            <button class="action-button pay">Payer</button>
                            <button class="action-button view">
                                <i class="fi fi-rr-eye"></i> Aper√ßu
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div id="console-output" style="background: #000; color: #0f0; padding: 20px; margin: 20px 0; font-family: monospace; min-height: 200px; overflow-y: auto;">
            <div>Console de debug :</div>
        </div>
    </div>

    <!-- Modal simple pour test -->
    <div id="document-preview-modal" class="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div class="modal-container" style="background: white; padding: 20px; border-radius: 8px; max-width: 500px; width: 90%;">
            <div class="modal-header" style="margin-bottom: 20px;">
                <h3>Aper√ßu du document</h3>
                <button class="modal-close" style="float: right; background: none; border: none; font-size: 20px; cursor: pointer;">&times;</button>
            </div>
            <div class="modal-body">
                <p>Document : <span id="preview-document-name">-</span></p>
                <p>Type : <span id="preview-document-type">-</span></p>
                <p>Statut : <span id="preview-document-status">-</span></p>
                <p>Institution : <span id="preview-institution">-</span></p>
                <p>Validit√© : <span id="preview-validity">-</span></p>
                <p>Date upload : <span id="preview-upload-date">-</span></p>
                <p>Prix : <span id="preview-price">-</span></p>
            </div>
            <div class="modal-footer" style="margin-top: 20px; text-align: right;">
                <button id="close-preview" class="btn-secondary">Fermer</button>
                <button id="pay-from-preview" class="btn-primary" style="display: none;">Payer</button>
                <button id="download-from-preview" class="btn-download" style="display: none;">T√©l√©charger</button>
            </div>
        </div>
    </div>

    <script>
        // Override console.log pour afficher dans notre div
        const consoleOutput = document.getElementById('console-output');
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            const div = document.createElement('div');
            div.textContent = args.join(' ');
            div.style.marginBottom = '5px';
            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        };
        
        console.log('üöÄ Page de test charg√©e');
    </script>
    <script src="js/main.js"></script>
    
    <script>
        // Test apr√®s chargement
        setTimeout(() => {
            console.log('üß™ Test des boutons apr√®s chargement...');
            const viewButtons = document.querySelectorAll('.action-button.view');
            console.log('üîç Boutons d\'aper√ßu trouv√©s:', viewButtons.length);
            
            const filterToggle = document.getElementById('filter-toggle');
            console.log('üéõÔ∏è Bouton filtre trouv√©:', !!filterToggle);
            
            if (viewButtons.length > 0) {
                console.log('‚úÖ Boutons d\'aper√ßu d√©tect√©s correctement');
            } else {
                console.log('‚ùå Aucun bouton d\'aper√ßu trouv√©');
            }
        }, 1000);
    </script>
</body>
</html>
